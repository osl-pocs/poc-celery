from src.poc_celery.get_container_ip import get_amqp_ip, get_redis_ip

# Get the Rabbitmq container IP address
AMQP_IP = get_amqp_ip()
REDIS_IP = get_redis_ip()

print(REDIS_IP, AMQP_IP, REDIS_IP, AMQP_IP)

broker=f"amqp://guest:guest@{AMQP_IP}:5672",
backend=f"redis://{REDIS_IP}:6379/0",
include=[
    # "poc_celery.tasks_async",
    # "poc_celery.tasks_collectors",
],
# result_backend = os.getenv("CELERY_RESULT_BACKEND")
# result_expires = os.getenv("CELERY_TASK_RESULT_EXPIRES")
# include = ("crawlclima.tasks",)
accept_content = ["application/json"]
result_serializer = "json"
worker_max_tasks_per_child = 10
timezone = "America/Sao_Paulo"
task_always_eager = False